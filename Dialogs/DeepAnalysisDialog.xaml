<Window x:Class="WindowsDb2Editor.Dialogs.DeepAnalysisDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="AI Deep Analysis"
        Width="1000"
        Height="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="ðŸ¤– AI Deep Analysis" FontSize="24" FontWeight="Bold"/>
            <TextBlock x:Name="TargetInfoText" Text="Analyzing: [Objects]" FontSize="12" Margin="0,5,0,0"/>
        </StackPanel>

        <TabControl Grid.Row="1">
            <TabItem Header="ðŸ“Š Analysis Results">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <TextBlock Text="Table/View Comments" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>
                        <TextBox x:Name="CommentsTextBox" IsReadOnly="True" MinHeight="80" Margin="0,0,0,15"
                                 TextWrapping="Wrap" AcceptsReturn="True"/>

                        <TextBlock Text="Column Profiling" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>
                        <DataGrid x:Name="ProfilingGrid" AutoGenerateColumns="False" IsReadOnly="True"
                                  Height="200" Margin="0,0,0,15">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Column" Binding="{Binding Column}" Width="*"/>
                                <DataGridTextColumn Header="Distinct Count" Binding="{Binding DistinctCount}" Width="120"/>
                                <DataGridTextColumn Header="Null Count" Binding="{Binding NullCount}" Width="100"/>
                                <DataGridTextColumn Header="Data Type" Binding="{Binding DataType}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <TextBlock Text="AI Insights" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>
                        <TextBox x:Name="AiInsightsTextBox" IsReadOnly="True" MinHeight="200"
                                 TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                                 Text="[AI Insights - Not configured]&#10;&#10;Configure an AI provider to enable deep analysis with data sampling, column profiling, relationship detection, and business logic explanation."/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="ðŸ“ˆ Relationships">
                <ListBox x:Name="RelationshipsListBox" Margin="10"/>
            </TabItem>

            <TabItem Header="ðŸ“ Raw Data Sample">
                <DataGrid x:Name="SampleDataGrid" IsReadOnly="True" Margin="10"
                          AutoGenerateColumns="True"/>
            </TabItem>
        </TabControl>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="ðŸ“¤ Export to Markdown" Width="180" Margin="0,0,10,0" Click="ExportMarkdown_Click"/>
            <Button Content="ðŸ“ Open in Cursor" Width="150" Margin="0,0,10,0" Click="OpenInCursor_Click"/>
            <Button Content="Close" Width="100" Click="Close_Click"/>
        </StackPanel>
    </Grid>
</Window>

