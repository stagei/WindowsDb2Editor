<Window x:Class="WindowsDb2Editor.Dialogs.SqlQueryHistoryDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="SQL Query History" 
        Icon="pack://application:,,,/Resources/dEdge.ico"
        Height="600" Width="1000" MinHeight="400" MinWidth="700"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
        Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="ðŸ“‹ Recent SQL Queries" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Center"/>
            <TextBlock x:Name="CountText" Text=" (0 queries)" FontSize="14" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" VerticalAlignment="Center"/>
            <Button x:Name="ClearButton" Content="Clear History" Margin="20,0,0,0" Click="Clear_Click" 
                    Background="Transparent" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            <Button x:Name="RefreshButton" Content="âŸ³ Refresh" Margin="10,0,0,0" Click="Refresh_Click"
                    Background="Transparent" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
        </StackPanel>
        
        <!-- Query List -->
        <DataGrid x:Name="QueryGrid" Grid.Row="1" 
                  AutoGenerateColumns="False" 
                  IsReadOnly="True"
                  SelectionMode="Single"
                  SelectionChanged="QueryGrid_SelectionChanged"
                  CanUserResizeColumns="True"
                  CanUserSortColumns="True"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  AlternatingRowBackground="{DynamicResource SystemControlBackgroundListLowBrush}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Time" Binding="{Binding DisplayTime}" Width="90"/>
                <DataGridTextColumn Header="Duration" Binding="{Binding DisplayDuration}" Width="70"/>
                <DataGridTextColumn Header="Rows" Binding="{Binding DisplayRows}" Width="60"/>
                <DataGridTextColumn Header="Source" Binding="{Binding Source}" Width="150"/>
                <DataGridTextColumn Header="SQL" Binding="{Binding ShortSql}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>
        
        <!-- SQL Preview -->
        <Grid Grid.Row="2" Margin="0,10,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="150"/>
            </Grid.RowDefinitions>
            
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,5">
                <TextBlock Text="SQL Statement:" FontWeight="SemiBold" VerticalAlignment="Center"/>
                <Button x:Name="CopySqlButton" Content="ðŸ“‹ Copy SQL" Margin="15,0,0,0" Click="CopySql_Click" Padding="10,3"/>
            </StackPanel>
            
            <TextBox x:Name="SqlPreviewText" Grid.Row="1" 
                     IsReadOnly="True" 
                     TextWrapping="Wrap" 
                     AcceptsReturn="True"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalScrollBarVisibility="Auto"
                     FontFamily="Consolas"
                     FontSize="12"
                     Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                     Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
        </Grid>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="Close" Width="100" Click="Close_Click" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>
