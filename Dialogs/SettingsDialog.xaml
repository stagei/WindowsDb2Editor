<Window x:Class="WindowsDb2Editor.Dialogs.SettingsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        mc:Ignorable="d"
        Title="Settings" 
        Height="550" 
        Width="600"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Settings TabControl -->
        <TabControl Grid.Row="0">
            <!-- Editor Settings -->
            <TabItem Header="Editor">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <TextBlock Text="Editor Settings" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>

                        <!-- Theme -->
                        <TextBlock Text="Theme:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                        <ComboBox x:Name="ThemeComboBox" Width="200" HorizontalAlignment="Left">
                            <ComboBoxItem Content="Dark" Tag="Dark"/>
                            <ComboBoxItem Content="Light" Tag="Light"/>
                            <ComboBoxItem Content="System" Tag="System"/>
                        </ComboBox>
                        <TextBlock Text="Theme preference (Ctrl+D to cycle)" 
                                   FontSize="11" 
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                   Margin="0,5,0,0"/>

                        <!-- Font Family -->
                        <TextBlock Text="Font Family:" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <ComboBox x:Name="FontFamilyComboBox" Width="200" HorizontalAlignment="Left">
                            <ComboBoxItem Content="Consolas"/>
                            <ComboBoxItem Content="Courier New"/>
                            <ComboBoxItem Content="Cascadia Code"/>
                            <ComboBoxItem Content="Cascadia Mono"/>
                            <ComboBoxItem Content="Fira Code"/>
                            <ComboBoxItem Content="JetBrains Mono"/>
                        </ComboBox>

                        <!-- Font Size -->
                        <TextBlock Text="Font Size:" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <Slider x:Name="FontSizeSlider" 
                                    Minimum="8" 
                                    Maximum="24" 
                                    Width="200" 
                                    TickFrequency="1" 
                                    IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding ElementName=FontSizeSlider, Path=Value}" 
                                       Margin="10,0,0,0" 
                                       VerticalAlignment="Center"
                                       MinWidth="30"/>
                        </StackPanel>

                        <!-- Tab Size -->
                        <TextBlock Text="Tab Size (spaces):" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <Slider x:Name="TabSizeSlider" 
                                    Minimum="2" 
                                    Maximum="8" 
                                    Width="200" 
                                    TickFrequency="1" 
                                    IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding ElementName=TabSizeSlider, Path=Value}" 
                                       Margin="10,0,0,0" 
                                       VerticalAlignment="Center"
                                       MinWidth="30"/>
                        </StackPanel>

                        <!-- Word Wrap -->
                        <TextBlock Text="Word Wrap:" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <CheckBox x:Name="WordWrapCheckBox" Content="Enable word wrap in SQL editor"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Database Settings -->
            <TabItem Header="Database">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <TextBlock Text="Database Settings" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>

                        <!-- Command Timeout -->
                        <TextBlock Text="Command Timeout (seconds):" FontWeight="SemiBold" Margin="0,10,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <Slider x:Name="CommandTimeoutSlider" 
                                    Minimum="10" 
                                    Maximum="300" 
                                    Width="250" 
                                    TickFrequency="10" 
                                    IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding ElementName=CommandTimeoutSlider, Path=Value}" 
                                       Margin="10,0,0,0" 
                                       VerticalAlignment="Center"
                                       MinWidth="40"/>
                        </StackPanel>
                        <TextBlock Text="Maximum time to wait for query execution" 
                                   FontSize="11" 
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                   Margin="0,5,0,0"/>

                        <!-- Connection Pool Size -->
                        <TextBlock Text="Connection Pool Size:" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <Slider x:Name="PoolSizeSlider" 
                                    Minimum="5" 
                                    Maximum="100" 
                                    Width="250" 
                                    TickFrequency="5" 
                                    IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding ElementName=PoolSizeSlider, Path=Value}" 
                                       Margin="10,0,0,0" 
                                       VerticalAlignment="Center"
                                       MinWidth="40"/>
                        </StackPanel>
                        <TextBlock Text="Maximum number of pooled connections" 
                                   FontSize="11" 
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                   Margin="0,5,0,0"/>

                        <!-- Auto Commit -->
                        <TextBlock Text="Transaction:" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <CheckBox x:Name="AutoCommitCheckBox" Content="Auto-commit transactions" IsChecked="True"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Logging Settings -->
            <TabItem Header="Logging">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <TextBlock Text="Logging Settings" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>

                        <!-- Log Level -->
                        <TextBlock Text="Log Level:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                        <ComboBox x:Name="LogLevelComboBox" Width="200" HorizontalAlignment="Left">
                            <ComboBoxItem Content="Trace" Tag="Trace"/>
                            <ComboBoxItem Content="Debug" Tag="Debug"/>
                            <ComboBoxItem Content="Info" Tag="Info"/>
                            <ComboBoxItem Content="Warn" Tag="Warn"/>
                            <ComboBoxItem Content="Error" Tag="Error"/>
                            <ComboBoxItem Content="Fatal" Tag="Fatal"/>
                        </ComboBox>
                        <TextBlock Text="Minimum log level to record" 
                                   FontSize="11" 
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                   Margin="0,5,0,0"/>

                        <!-- Log Path -->
                        <TextBlock Text="Log Directory:" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBox x:Name="LogPathTextBox" Width="350" IsReadOnly="True"/>
                            <Button Content="Browse..." Click="BrowseLogPath_Click" Margin="10,0,0,0" Padding="15,5"/>
                        </StackPanel>

                        <!-- Open Log Directory -->
                        <Button Content="Open Log Directory" Click="OpenLogDirectory_Click" 
                                Margin="0,15,0,0" Padding="15,8" Width="200" HorizontalAlignment="Left"/>

                        <!-- Log Retention -->
                        <TextBlock Text="Log Retention (days):" FontWeight="SemiBold" Margin="0,20,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <Slider x:Name="LogRetentionSlider" 
                                    Minimum="7" 
                                    Maximum="90" 
                                    Width="250" 
                                    TickFrequency="7" 
                                    IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding ElementName=LogRetentionSlider, Path=Value}" 
                                       Margin="10,0,0,0" 
                                       VerticalAlignment="Center"
                                       MinWidth="40"/>
                        </StackPanel>
                        <TextBlock Text="Number of days to keep log files" 
                                   FontSize="11" 
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                   Margin="0,5,0,0"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="Reset to Defaults" Click="ResetDefaults_Click" Padding="15,8" Margin="0,0,10,0"/>
            <Button Content="Save" Click="Save_Click" IsDefault="True" Padding="20,8" Margin="0,0,10,0"/>
            <Button Content="Cancel" Click="Cancel_Click" IsCancel="True" Padding="20,8"/>
        </StackPanel>
    </Grid>
</Window>

