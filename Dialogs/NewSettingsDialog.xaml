<Window x:Class="WindowsDb2Editor.Dialogs.NewSettingsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="Preferences" 
        Height="750"
        Width="1100"
        MinHeight="600"
        MinWidth="900"
        WindowStartupLocation="CenterOwner"
        Icon="pack://application:,,,/Resources/dEdge.ico"
        Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
        Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Left Panel: Filter + TreeView -->
        <Border Grid.Column="0" Grid.Row="0"
                Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- Filter Box -->
                <TextBox x:Name="FilterTextBox" 
                         Grid.Row="0"
                         Margin="8"
                         Padding="8,6"
                         TextChanged="FilterTextBox_TextChanged"
                         ui:ControlHelper.PlaceholderText="ðŸ” type filter text"/>
                
                <!-- TreeView Navigation -->
                <TreeView x:Name="SettingsTreeView" 
                          Grid.Row="1"
                          Margin="4,0,4,4"
                          BorderThickness="0"
                          Background="Transparent"
                          SelectedItemChanged="SettingsTreeView_SelectedItemChanged">
                    <TreeView.ItemContainerStyle>
                        <Style TargetType="TreeViewItem">
                            <Setter Property="IsExpanded" Value="False"/>
                            <Setter Property="Padding" Value="4,3"/>
                            <Setter Property="Margin" Value="0,1"/>
                        </Style>
                    </TreeView.ItemContainerStyle>
                    
                    <!-- Appearance -->
                    <TreeViewItem Header="Appearance" Tag="Appearance" IsExpanded="True">
                        <TreeViewItem Header="Theme" Tag="Theme"/>
                        <TreeViewItem Header="Colors and Fonts" Tag="ColorsAndFonts"/>
                        <TreeViewItem Header="Object Browser" Tag="ObjectBrowser"/>
                        <TreeViewItem Header="Data Grids" Tag="DataGrids"/>
                        <TreeViewItem Header="Window Behavior" Tag="WindowBehavior"/>
                    </TreeViewItem>
                    
                    <!-- Editor -->
                    <TreeViewItem Header="Editor" Tag="Editor">
                        <TreeViewItem Header="General" Tag="EditorGeneral"/>
                        <TreeViewItem Header="Formatting" Tag="EditorFormatting"/>
                        <TreeViewItem Header="Syntax Highlighting" Tag="SyntaxHighlighting"/>
                    </TreeViewItem>
                    
                    <!-- Database -->
                    <TreeViewItem Header="Database" Tag="Database">
                        <TreeViewItem Header="Connection" Tag="DbConnection"/>
                        <TreeViewItem Header="Query Execution" Tag="QueryExecution"/>
                        <TreeViewItem Header="Result Sets" Tag="ResultSets"/>
                    </TreeViewItem>
                    
                    <!-- Keys (Hotkeys) -->
                    <TreeViewItem Header="Keys" Tag="Keys" IsExpanded="True"/>
                    
                    <!-- Logging -->
                    <TreeViewItem Header="Logging" Tag="Logging"/>
                    
                    <!-- AI -->
                    <TreeViewItem Header="AI Assistant" Tag="AI">
                        <TreeViewItem Header="Providers" Tag="AIProviders"/>
                        <TreeViewItem Header="Models" Tag="AIModels"/>
                    </TreeViewItem>
                </TreeView>
            </Grid>
        </Border>

        <!-- Right Panel: Content Area -->
        <Grid Grid.Column="1" Grid.Row="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0" 
                    Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                    BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                    BorderThickness="0,0,0,1"
                    Padding="20,12">
                <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="ContentTitleText" 
                               Text="Appearance" 
                               FontSize="16" 
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                    <Button x:Name="NavigateBackButton" 
                            Content="â†" 
                            Margin="15,0,5,0"
                            Width="28" Height="28"
                            Visibility="Collapsed"
                            Click="NavigateBack_Click"
                            ToolTip="Back"/>
                    <Button x:Name="NavigateForwardButton" 
                            Content="â†’" 
                            Width="28" Height="28"
                            Visibility="Collapsed"
                            Click="NavigateForward_Click"
                            ToolTip="Forward"/>
                </StackPanel>
            </Border>
            
            <!-- Content Panel -->
            <ScrollViewer Grid.Row="1" 
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Padding="20">
                <ContentControl x:Name="ContentPanel"/>
            </ScrollViewer>
        </Grid>

        <!-- Bottom Button Bar -->
        <Border Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1"
                Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                BorderThickness="0,1,0,0"
                Padding="15,12">
            <Grid>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Button x:Name="RestoreDefaultsButton" 
                            Content="Restore Defaults" 
                            Width="120" 
                            Height="30"
                            Click="RestoreDefaults_Click"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="ApplyButton" 
                            Content="Apply" 
                            Width="90" 
                            Height="30" 
                            Margin="0,0,10,0"
                            Click="Apply_Click"/>
                    <Button x:Name="ApplyAndCloseButton" 
                            Content="Apply and Close" 
                            Width="120" 
                            Height="30" 
                            Margin="0,0,10,0"
                            Click="ApplyAndClose_Click"
                            Style="{StaticResource AccentButtonStyle}"/>
                    <Button x:Name="CancelButton" 
                            Content="Cancel" 
                            Width="90" 
                            Height="30"
                            Click="Cancel_Click"
                            IsCancel="True"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
