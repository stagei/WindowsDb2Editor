# JSON Files Logical Interaction Flow

**Purpose:** Visual and logical representation of how all JSON configuration files interact  
**Date:** November 20, 2025  
**Audience:** Developers implementing the metadata abstraction architecture

---

## ğŸ¯ OVERVIEW

This document shows the **logical flow and relationships** between all JSON configuration files in the metadata abstraction and localization architecture.

---

## ğŸ“Š HIGH-LEVEL ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APPLICATION STARTUP                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  DB2MetadataService       â”‚   â”‚  LocalizationService      â”‚
    â”‚  (Provider/Version Layer) â”‚   â”‚  (Language Layer)         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                               â”‚
                    â”‚                               â”‚
        Loads ALL JSON files                Loads language files
        from Metadata/DB2/12.1/              from Localization/
                    â”‚                               â”‚
                    â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              IN-MEMORY DICTIONARIES                           â”‚
    â”‚  - SQL Queries Dictionary                                     â”‚
    â”‚  - UI Features Dictionary                                     â”‚
    â”‚  - Icons Dictionary                                           â”‚
    â”‚  - Text Translations Dictionary (per language)                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â–¼                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Application Services â”‚       â”‚   UI Components     â”‚
        â”‚  - ObjectBrowserServiceâ”‚      â”‚   - MainWindow      â”‚
        â”‚  - DdlGeneratorService â”‚      â”‚   - Dialogs         â”‚
        â”‚  - TableDetailsDialog  â”‚      â”‚   - Controls        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                               â”‚
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   RENDERED UI         â”‚
                        â”‚   with correct:       â”‚
                        â”‚   - SQL queries       â”‚
                        â”‚   - Translated text   â”‚
                        â”‚   - Icons             â”‚
                        â”‚   - Layouts           â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ INTERACTION FLOW: LOADING A VIEW

### Scenario: User expands "Views" node in Object Browser

```
USER ACTION: Click "Views" node in Object Browser
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ObjectBrowserService.GetViewsAsync("TV")               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Calls: _metadataService.GetQuery("DB2", "12.1", "get_views_for_schema")
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: DB2MetadataService.GetQuery()                          â”‚
â”‚   - Looks up in SQL Queries Dictionary                         â”‚
â”‚   - Key: "get_views_for_schema"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Returns SQL from: Metadata/DB2/12.1/sql_statements.json
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sql_statements.json                                             â”‚
â”‚ {                                                               â”‚
â”‚   "queries": {                                                  â”‚
â”‚     "get_views_for_schema": {                                   â”‚
â”‚       "sql": "SELECT TRIM(V.VIEWNAME)...",                      â”‚
â”‚       "parameters": ["TABSCHEMA"]                               â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ SQL query returned
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Execute SQL against DB2 database                       â”‚
â”‚   - Parameter: schemaName = "TV"                               â”‚
â”‚   - Returns: List of views                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Data: [VIEW1, VIEW2, VIEW3]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Create TreeView nodes                                  â”‚
â”‚   - Need icon for each view                                    â”‚
â”‚   - Need tooltip text                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                             â”‚
    â–¼                                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Icon:                  â”‚                    â”‚ Get Tooltip Text:        â”‚
â”‚ _iconProvider.GetIcon(     â”‚                    â”‚ _localization.Get(       â”‚
â”‚   "objects.view")          â”‚                    â”‚   "ui.object_browser.    â”‚
â”‚                            â”‚                    â”‚    tooltips.view")       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                                             â”‚
    â”‚ Looks in: ui_icons.json                                    â”‚ Looks in: Localization/{lang}.json
    â”‚                                                             â”‚
    â–¼                                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ui_icons.json              â”‚                    â”‚ en-US.json               â”‚
â”‚ {                          â”‚                    â”‚ {                        â”‚
â”‚   "objects": {             â”‚                    â”‚   "ui": {                â”‚
â”‚     "view": "ğŸ‘"          â”‚                    â”‚     "object_browser": {  â”‚
â”‚   }                        â”‚                    â”‚       "tooltips": {      â”‚
â”‚ }                          â”‚                    â”‚         "view": "View"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚       }                  â”‚
    â”‚                                              â”‚     }                    â”‚
    â”‚ Returns: "ğŸ‘"                                â”‚   }                      â”‚
    â”‚                                              â”‚ }                        â”‚
    â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                                             â”‚
    â”‚                                                             â”‚ Returns: "View"
    â”‚                                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Step 5: Render UI           â”‚
                    â”‚   TreeViewItem:             â”‚
                    â”‚   - Icon: ğŸ‘               â”‚
                    â”‚   - Text: "VIEW1"           â”‚
                    â”‚   - Tooltip: "View"         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ INTERACTION FLOW: SHOWING AN ERROR MESSAGE

### Scenario: Connection to database fails

```
USER ACTION: Click "Connect" button
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ConnectionDialog.Connect_Click()                       â”‚
â”‚   - Validates input                                            â”‚
â”‚   - Calls: _connectionManager.OpenAsync()                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ DB2Exception thrown
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: catch (DB2Exception ex)                                â”‚
â”‚   - Need to show user-friendly error message                   â”‚
â”‚   - Need localized text                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Calls: _localization.Get("messages.errors.connection_failed",
    â”‚                          new { database = dbName })
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: LocalizationService.Get()                              â”‚
â”‚   - Current language: "fr-FR" (French)                         â”‚
â”‚   - Key: "messages.errors.connection_failed"                   â”‚
â”‚   - Parameters: { database = "TESTDB" }                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Looks in: Localization/fr-FR.json
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fr-FR.json                                                      â”‚
â”‚ {                                                               â”‚
â”‚   "messages": {                                                 â”‚
â”‚     "errors": {                                                 â”‚
â”‚       "connection_failed":                                      â”‚
â”‚         "Ã‰chec de la connexion Ã  {database}.\n\n                â”‚
â”‚          Veuillez vÃ©rifier vos paramÃ¨tres de connexion."       â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Template found, replace {database} with "TESTDB"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Format string                                          â”‚
â”‚   - Replace {database} â†’ "TESTDB"                              â”‚
â”‚   - Result: "Ã‰chec de la connexion Ã  TESTDB.\n\n               â”‚
â”‚              Veuillez vÃ©rifier vos paramÃ¨tres de connexion."   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Also get error dialog title
    â”‚ Calls: _localization.Get("messages.errors.title")
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fr-FR.json                                                      â”‚
â”‚ {                                                               â”‚
â”‚   "messages": {                                                 â”‚
â”‚     "errors": {                                                 â”‚
â”‚       "title": "Erreur"                                         â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Returns: "Erreur"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Show MessageBox                                        â”‚
â”‚   MessageBox.Show(                                             â”‚
â”‚     "Ã‰chec de la connexion Ã  TESTDB...",                       â”‚
â”‚     "Erreur",                                                  â”‚
â”‚     MessageBoxButton.OK,                                       â”‚
â”‚     MessageBoxImage.Error                                      â”‚
â”‚   )                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ­ INTERACTION FLOW: CONTEXT MENU ON TABLE

### Scenario: User right-clicks on a table in Object Browser

```
USER ACTION: Right-click table "CUSTOMER" in schema "DBM"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: DatabaseTreeView_PreviewMouseRightButtonDown           â”‚
â”‚   - Selected item: DatabaseObject (Type: Tables)               â”‚
â”‚   - Need to build context menu                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Calls: CreateObjectContextMenu(obj)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Get context menu configuration                         â”‚
â”‚   _metadataService.GetContextMenu("DB2", "12.1", "table")      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Looks in: Metadata/DB2/12.1/context_menus.json
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ context_menus.json                                              â”‚
â”‚ {                                                               â”‚
â”‚   "table": {                                                    â”‚
â”‚     "actions": [                                                â”‚
â”‚       {                                                         â”‚
â”‚         "id": "browse_data",                                    â”‚
â”‚         "label_key": "ui.object_browser.context_menu.browse_data",â”‚
â”‚         "icon_key": "status.loading",                           â”‚
â”‚         "min_access_level": "Standard",                         â”‚
â”‚         "query_key": "get_top_n_rows"                           â”‚
â”‚       },                                                        â”‚
â”‚       {                                                         â”‚
â”‚         "id": "count_rows",                                     â”‚
â”‚         "label_key": "ui.object_browser.context_menu.count_rows",â”‚
â”‚         "icon_key": "objects.table",                            â”‚
â”‚         "min_access_level": "Standard",                         â”‚
â”‚         "query_key": "get_row_count"                            â”‚
â”‚       },                                                        â”‚
â”‚       {                                                         â”‚
â”‚         "id": "view_properties",                                â”‚
â”‚         "label_key": "ui.object_browser.context_menu.view_properties",â”‚
â”‚         "icon_key": "status.success",                           â”‚
â”‚         "min_access_level": "Standard",                         â”‚
â”‚         "opens_dialog": "table_properties"                      â”‚
â”‚       }                                                         â”‚
â”‚     ]                                                           â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Actions list returned
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Build context menu dynamically                         â”‚
â”‚   - For each action:                                           â”‚
â”‚     1. Check RBAC (user access level >= min_access_level)      â”‚
â”‚     2. Get icon from ui_icons.json                             â”‚
â”‚     3. Get label text from Localization/{lang}.json            â”‚
â”‚     4. Create MenuItem                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      â”‚                       â”‚                      â”‚
    â–¼                      â–¼                       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check RBAC   â”‚  â”‚ Get Icon     â”‚  â”‚ Get Label Text    â”‚  â”‚ Create MenuItem â”‚
â”‚              â”‚  â”‚              â”‚  â”‚                   â”‚  â”‚                 â”‚
â”‚ User Level:  â”‚  â”‚ Icon Key:    â”‚  â”‚ Label Key:        â”‚  â”‚ Final:          â”‚
â”‚ "Standard"   â”‚  â”‚ "status.     â”‚  â”‚ "ui.object_       â”‚  â”‚ Icon: ğŸ“Š       â”‚
â”‚              â”‚  â”‚  loading"    â”‚  â”‚  browser.context_ â”‚  â”‚ Text: "Browse   â”‚
â”‚ Min Required:â”‚  â”‚              â”‚  â”‚  menu.browse_data"â”‚  â”‚       Data"     â”‚
â”‚ "Standard"   â”‚  â”‚ Returns: â³  â”‚  â”‚                   â”‚  â”‚ Enabled: true   â”‚
â”‚              â”‚  â”‚              â”‚  â”‚ Returns: "Browse  â”‚  â”‚                 â”‚
â”‚ âœ… PASS      â”‚  â”‚              â”‚  â”‚          Data"    â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                      â”‚                       â”‚                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Step 4: Show Context Menu     â”‚
                    â”‚   âœ“ ğŸ“Š Browse Data (Top 1000) â”‚
                    â”‚   âœ“ ğŸ”¢ Count Rows             â”‚
                    â”‚   âœ“ ğŸ“‹ Properties...          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    USER ACTION: Click "Browse Data"
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Step 5: Execute action        â”‚
                    â”‚   - Get SQL query:            â”‚
                    â”‚     "get_top_n_rows"          â”‚
                    â”‚   - Execute against DB        â”‚
                    â”‚   - Show results              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ INTERACTION FLOW: SQL INTELLISENSE

### Scenario: User types "SELECT" in SQL editor

```
USER ACTION: Types "SELECT " in SQL editor
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: AvalonEdit triggers completion request                 â”‚
â”‚   - Caret position after "SELECT "                             â”‚
â”‚   - Need to show context-aware suggestions                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Calls: _intellisenseService.GetCompletions(context)
    â”‚        where context = "after_select"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: IntellisenseService.GetCompletions()                   â”‚
â”‚   - Load config: intellisense_config.json                      â”‚
â”‚   - Check: context_aware_suggestions["after_select"]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Looks in: Metadata/DB2/12.1/intellisense_config.json
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ intellisense_config.json                                        â”‚
â”‚ {                                                               â”‚
â”‚   "context_aware_suggestions": {                                â”‚
â”‚     "after_select": [                                           â”‚
â”‚       "column_names",                                           â”‚
â”‚       "functions",                                              â”‚
â”‚       "DISTINCT",                                               â”‚
â”‚       "TOP",                                                    â”‚
â”‚       "*"                                                       â”‚
â”‚     ]                                                           â”‚
â”‚   },                                                            â”‚
â”‚   "features": {                                                 â”‚
â”‚     "column_completion": {                                      â”‚
â”‚       "enabled": true,                                          â”‚
â”‚       "query_key": "get_table_columns"                          â”‚
â”‚     },                                                          â”‚
â”‚     "function_completion": {                                    â”‚
â”‚       "enabled": true                                           â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Config: Show column_names, functions, keywords
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Build completion list                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    â”‚                       â”‚                     â”‚
    â–¼                    â–¼                       â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Keywords â”‚  â”‚ Get         â”‚  â”‚ Get Column Names â”‚  â”‚ Get Functions  â”‚
â”‚              â”‚  â”‚ Column Namesâ”‚  â”‚                  â”‚  â”‚                â”‚
â”‚ From:        â”‚  â”‚ From:       â”‚  â”‚ Query DB using:  â”‚  â”‚ From:          â”‚
â”‚ syntax_      â”‚  â”‚ Current     â”‚  â”‚ "get_table_      â”‚  â”‚ syntax_        â”‚
â”‚ keywords.jsonâ”‚  â”‚ table       â”‚  â”‚  columns"        â”‚  â”‚ keywords.json  â”‚
â”‚              â”‚  â”‚ in editor   â”‚  â”‚                  â”‚  â”‚                â”‚
â”‚ Returns:     â”‚  â”‚             â”‚  â”‚ Returns:         â”‚  â”‚ Returns:       â”‚
â”‚ - DISTINCT   â”‚  â”‚ Returns:    â”‚  â”‚ - CUSTOMER_ID    â”‚  â”‚ - COUNT()      â”‚
â”‚ - TOP        â”‚  â”‚ - *         â”‚  â”‚ - CUSTOMER_NAME  â”‚  â”‚ - SUM()        â”‚
â”‚ - AS         â”‚  â”‚             â”‚  â”‚ - EMAIL          â”‚  â”‚ - AVG()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â”‚                       â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Step 4: Show completion list  â”‚
                    â”‚   *                          â”‚
                    â”‚   DISTINCT                   â”‚
                    â”‚   TOP                        â”‚
                    â”‚   AS                         â”‚
                    â”‚   CUSTOMER_ID                â”‚
                    â”‚   CUSTOMER_NAME              â”‚
                    â”‚   EMAIL                      â”‚
                    â”‚   COUNT()                    â”‚
                    â”‚   SUM()                      â”‚
                    â”‚   AVG()                      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    USER ACTION: Selects "CUSTOMER_NAME"
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Step 5: Insert completion     â”‚
                    â”‚   Editor now shows:           â”‚
                    â”‚   "SELECT CUSTOMER_NAME "     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ JSON FILE DEPENDENCIES MAP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INDEPENDENT FILES (No dependencies)            â”‚
â”‚  These files are loaded first and don't reference other files     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â–º sql_statements.json          (SQL queries with parameters)
    â”œâ”€â–º syntax_keywords.json         (Reserved words, data types, functions)
    â”œâ”€â–º ui_icons.json                (Icon mappings)
    â”œâ”€â–º ui_layout.json               (Sizing and layout values)
    â”œâ”€â–º performance_config.json      (Timeouts and performance settings)
    â”œâ”€â–º keyboard_shortcuts.json      (Keyboard mappings)
    â”œâ”€â–º sql_templates.json           (SQL snippet templates)
    â””â”€â–º Localization/{lang}.json     (Translated text)
         â”‚
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DEPENDENT FILES (Reference other files)           â”‚
â”‚  These files contain KEYS that point to other files               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â–º ui_text_keys.json
    â”‚   â”‚   Maps UI elements â†’ text keys
    â”‚   â””â”€â–º References: Localization/{lang}.json
    â”‚
    â”œâ”€â–º context_menus.json
    â”‚   â”‚   Defines context menu actions
    â”‚   â”œâ”€â–º References: sql_statements.json (query_key)
    â”‚   â”œâ”€â–º References: ui_icons.json (icon_key)
    â”‚   â””â”€â–º References: Localization/{lang}.json (label_key)
    â”‚
    â”œâ”€â–º intellisense_config.json
    â”‚   â”‚   Defines autocomplete behavior
    â”‚   â”œâ”€â–º References: sql_statements.json (query_key for metadata)
    â”‚   â”œâ”€â–º References: syntax_keywords.json (keywords, functions)
    â”‚   â””â”€â–º References: sql_templates.json (snippet templates)
    â”‚
    â”œâ”€â–º object_browser_config.json
    â”‚   â”‚   Defines Object Browser structure
    â”‚   â”œâ”€â–º References: ui_icons.json (icon for each category)
    â”‚   â”œâ”€â–º References: Localization/{lang}.json (name_key, tooltip_key)
    â”‚   â””â”€â–º References: sql_statements.json (query_key for each object type)
    â”‚
    â”œâ”€â–º property_windows_config.json
    â”‚   â”‚   Defines property dialog structure
    â”‚   â”œâ”€â–º References: sql_statements.json (query_key for tabs)
    â”‚   â”œâ”€â–º References: Localization/{lang}.json (label_key for tabs/fields)
    â”‚   â””â”€â–º References: ui_layout.json (dialog sizing)
    â”‚
    â””â”€â–º ui_features_config.json
        â”‚   Defines feature availability
        â”œâ”€â–º References: Localization/{lang}.json (name_key, description_key)
        â”œâ”€â–º References: object_browser_config.json (object types)
        â””â”€â–º References: property_windows_config.json (property windows)
```

---

## ğŸ“‹ REFERENCE RESOLUTION EXAMPLE

### How a single UI element resolves all its properties:

```
UI Element: "Browse Data" context menu item on table
    â”‚
    â”œâ”€â–º Step 1: Get menu definition
    â”‚   Source: context_menus.json
    â”‚   Key: "table.actions[0]"
    â”‚   Result: {
    â”‚     "id": "browse_data",
    â”‚     "label_key": "ui.object_browser.context_menu.browse_data",
    â”‚     "icon_key": "status.loading",
    â”‚     "query_key": "get_top_n_rows"
    â”‚   }
    â”‚
    â”œâ”€â–º Step 2: Resolve label text
    â”‚   Source: Localization/en-US.json
    â”‚   Key: "ui.object_browser.context_menu.browse_data"
    â”‚   Result: "Browse Data (Top 1000)"
    â”‚
    â”œâ”€â–º Step 3: Resolve icon
    â”‚   Source: ui_icons.json
    â”‚   Key: "status.loading"
    â”‚   Result: "â³"
    â”‚
    â”œâ”€â–º Step 4: Resolve SQL query (when clicked)
    â”‚   Source: sql_statements.json
    â”‚   Key: "get_top_n_rows"
    â”‚   Result: "SELECT * FROM {schema}.{table} FETCH FIRST 1000 ROWS ONLY"
    â”‚
    â””â”€â–º Final UI Element:
        MenuItem {
          Icon: â³
          Text: "Browse Data (Top 1000)"
          Click: Execute SQL "SELECT * FROM DBM.CUSTOMER FETCH FIRST 1000 ROWS ONLY"
        }
```

---

## ğŸ”„ CIRCULAR DEPENDENCY PREVENTION

**Rule:** No JSON file should reference another in a way that creates a circular dependency.

### Allowed:
```
context_menus.json â†’ sql_statements.json  âœ…
context_menus.json â†’ ui_icons.json        âœ…
context_menus.json â†’ Localization/*.json  âœ…
```

### Not Allowed:
```
sql_statements.json â†’ context_menus.json  âŒ (would create circle)
ui_icons.json â†’ context_menus.json        âŒ (would create circle)
```

---

## ğŸ¯ VALIDATION CHAIN

When loading JSON files, validate in this order:

```
1. Load INDEPENDENT files (no validation needed)
   â””â”€â–º sql_statements.json
   â””â”€â–º syntax_keywords.json
   â””â”€â–º ui_icons.json
   â””â”€â–º ui_layout.json
   â””â”€â–º performance_config.json
   â””â”€â–º keyboard_shortcuts.json
   â””â”€â–º sql_templates.json
   â””â”€â–º Localization/{lang}.json

2. Load DEPENDENT files and VALIDATE references
   â””â”€â–º ui_text_keys.json
       â”œâ”€â–º Validate: All text_key values exist in Localization/{lang}.json âœ“
       â””â”€â–º Log warnings for missing translations
   
   â””â”€â–º context_menus.json
       â”œâ”€â–º Validate: All query_key values exist in sql_statements.json âœ“
       â”œâ”€â–º Validate: All icon_key values exist in ui_icons.json âœ“
       â”œâ”€â–º Validate: All label_key values exist in Localization/{lang}.json âœ“
       â””â”€â–º Log errors for missing references
   
   â””â”€â–º intellisense_config.json
       â”œâ”€â–º Validate: All query_key values exist in sql_statements.json âœ“
       â”œâ”€â–º Validate: All keywords exist in syntax_keywords.json âœ“
       â””â”€â–º Log warnings for missing references
   
   â””â”€â–º object_browser_config.json
       â”œâ”€â–º Validate: All query_key values exist in sql_statements.json âœ“
       â”œâ”€â–º Validate: All icon_key values exist in ui_icons.json âœ“
       â”œâ”€â–º Validate: All text keys exist in Localization/{lang}.json âœ“
       â””â”€â–º Log errors for missing references
   
   â””â”€â–º property_windows_config.json
       â”œâ”€â–º Validate: All query_key values exist in sql_statements.json âœ“
       â”œâ”€â–º Validate: All label_key values exist in Localization/{lang}.json âœ“
       â””â”€â–º Log errors for missing references
   
   â””â”€â–º ui_features_config.json
       â”œâ”€â–º Validate: All name_key values exist in Localization/{lang}.json âœ“
       â””â”€â–º Log warnings for missing translations

3. Report validation results
   â””â”€â–º Errors: Block application startup
   â””â”€â–º Warnings: Log and continue with fallbacks
```

---

## ğŸ” CACHE STRATEGY

```
Application Startup:
    â”‚
    â”œâ”€â–º Load all JSON files into memory
    â”‚   â””â”€â–º Store in dictionaries for O(1) lookup
    â”‚
    â”œâ”€â–º Build index of references
    â”‚   â””â”€â–º PreventValidate all keys exist
    â”‚
    â””â”€â–º Create lookup service
        â””â”€â–º Fast access to any value by key

Runtime:
    â”‚
    â”œâ”€â–º All queries: O(1) dictionary lookup (no file I/O)
    â”œâ”€â–º All text: O(1) dictionary lookup (no file I/O)
    â””â”€â–º All icons: O(1) dictionary lookup (no file I/O)

Language Change:
    â”‚
    â”œâ”€â–º Reload only Localization/{new-lang}.json
    â”œâ”€â–º Update text dictionary
    â””â”€â–º Fire LanguageChanged event â†’ UI updates
```

---

## ğŸš€ COMPLETE EXAMPLE: TABLE PROPERTIES DIALOG

```
USER: Double-clicks table "CUSTOMER" in Object Browser
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Get Property Window Configuration                             â”‚
â”‚    Source: property_windows_config.json                          â”‚
â”‚    Key: "table_properties"                                       â”‚
â”‚    Returns: {                                                    â”‚
â”‚      "tabs": [                                                   â”‚
â”‚        {                                                         â”‚
â”‚          "id": "properties",                                     â”‚
â”‚          "name_key": "ui.dialogs.table_properties.tabs.properties",â”‚
â”‚          "query_key": "get_table_properties"                     â”‚
â”‚        },                                                        â”‚
â”‚        {                                                         â”‚
â”‚          "id": "columns",                                        â”‚
â”‚          "name_key": "ui.dialogs.table_properties.tabs.columns",â”‚
â”‚          "query_key": "get_table_columns"                        â”‚
â”‚        }                                                         â”‚
â”‚      ]                                                           â”‚
â”‚    }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                              â”‚                              â”‚
    â–¼                              â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2a. Tab 1    â”‚         â”‚ 2b. Tab 2    â”‚              â”‚ 3. Window    â”‚
â”‚             â”‚         â”‚             â”‚              â”‚    Title     â”‚
â”‚ Name Key:    â”‚         â”‚ Name Key:    â”‚              â”‚              â”‚
â”‚ "ui.dialogs. â”‚         â”‚ "ui.dialogs. â”‚              â”‚ Title Key:   â”‚
â”‚  table_      â”‚         â”‚  table_      â”‚              â”‚ "ui.dialogs. â”‚
â”‚  properties. â”‚         â”‚  properties. â”‚              â”‚  table_      â”‚
â”‚  tabs.       â”‚         â”‚  tabs.       â”‚              â”‚  properties. â”‚
â”‚  properties" â”‚         â”‚  columns"    â”‚              â”‚  title"      â”‚
â”‚              â”‚         â”‚              â”‚              â”‚              â”‚
â”‚ Localization:â”‚         â”‚ Localization:â”‚              â”‚ Localization:â”‚
â”‚ en-US.json   â”‚         â”‚ en-US.json   â”‚              â”‚ en-US.json   â”‚
â”‚              â”‚         â”‚              â”‚              â”‚              â”‚
â”‚ Returns:     â”‚         â”‚ Returns:     â”‚              â”‚ Returns:     â”‚
â”‚ "Properties" â”‚         â”‚ "Columns"    â”‚              â”‚ "Table       â”‚
â”‚              â”‚         â”‚              â”‚              â”‚  Properties  â”‚
â”‚              â”‚         â”‚              â”‚              â”‚  - {table}"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                              â”‚                              â”‚
    â”‚                              â”‚                              â”‚
    â–¼                              â–¼                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚ 4a. Get Data â”‚         â”‚ 4b. Get Data â”‚                        â”‚
â”‚             â”‚         â”‚             â”‚                        â”‚
â”‚ Query Key:   â”‚         â”‚ Query Key:   â”‚                        â”‚
â”‚ "get_table_  â”‚         â”‚ "get_table_  â”‚                        â”‚
â”‚  properties" â”‚         â”‚  columns"    â”‚                        â”‚
â”‚              â”‚         â”‚              â”‚                        â”‚
â”‚ sql_         â”‚         â”‚ sql_         â”‚                        â”‚
â”‚ statements.  â”‚         â”‚ statements.  â”‚                        â”‚
â”‚ json         â”‚         â”‚ json         â”‚                        â”‚
â”‚              â”‚         â”‚              â”‚                        â”‚
â”‚ Returns SQL: â”‚         â”‚ Returns SQL: â”‚                        â”‚
â”‚ "SELECT ...  â”‚         â”‚ "SELECT ...  â”‚                        â”‚
â”‚  FROM SYSCAT â”‚         â”‚  FROM SYSCAT â”‚                        â”‚
â”‚  .TABLES..." â”‚         â”‚  .COLUMNS..."â”‚                        â”‚
â”‚              â”‚         â”‚              â”‚                        â”‚
â”‚ Execute â†’ DB â”‚         â”‚ Execute â†’ DB â”‚                        â”‚
â”‚              â”‚         â”‚              â”‚                        â”‚
â”‚ Returns:     â”‚         â”‚ Returns:     â”‚                        â”‚
â”‚ - Owner      â”‚         â”‚ - CUSTOMER_IDâ”‚                        â”‚
â”‚ - Created    â”‚         â”‚ - CUSTOMER_  â”‚                        â”‚
â”‚ - Rows: 1500 â”‚         â”‚   NAME       â”‚                        â”‚
â”‚ - Tablespace â”‚         â”‚ - EMAIL      â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
    â”‚                              â”‚                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ 5. Render Dialog              â”‚
                   â”‚                               â”‚
                   â”‚ Window Title:                 â”‚
                   â”‚ "Table Properties - CUSTOMER" â”‚
                   â”‚                               â”‚
                   â”‚ Tab 1: "Properties"           â”‚
                   â”‚   - Owner: DBM                â”‚
                   â”‚   - Created: 2024-01-15       â”‚
                   â”‚   - Rows: 1,500               â”‚
                   â”‚   - Tablespace: USERSPACE1    â”‚
                   â”‚                               â”‚
                   â”‚ Tab 2: "Columns"              â”‚
                   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                   â”‚   â”‚ Name         â”‚ Type    â”‚  â”‚
                   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                   â”‚   â”‚ CUSTOMER_ID  â”‚ INTEGER â”‚  â”‚
                   â”‚   â”‚ CUSTOMER_NAMEâ”‚ VARCHAR â”‚  â”‚
                   â”‚   â”‚ EMAIL        â”‚ VARCHAR â”‚  â”‚
                   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ KEY TAKEAWAYS

1. **All JSON files are loaded at startup** into in-memory dictionaries
2. **Runtime lookups are O(1)** - no file I/O during normal operation
3. **Dependent files use keys** to reference independent files
4. **Validation happens at load time** - errors logged immediately
5. **Language changes** only reload localization files - no full restart
6. **Each UI element** resolves properties from multiple JSON files
7. **No circular dependencies** - clear dependency hierarchy
8. **Fallback to English** if translation missing in other languages

---

## ğŸ¯ IMPLEMENTATION CHECKLIST

- [ ] Load independent JSON files first
- [ ] Validate dependent file references
- [ ] Build in-memory dictionaries for fast lookup
- [ ] Implement key validation at startup
- [ ] Log errors for missing references
- [ ] Implement fallback to English for missing translations
- [ ] Cache all JSON data in memory
- [ ] Support hot-reload for localization files
- [ ] Create JSON schema validation tool
- [ ] Document all key formats and conventions

---

**Status:** ğŸ“‹ FLOW DOCUMENTED  
**Purpose:** Developer reference for implementing JSON interaction logic  
**Next Step:** Begin implementation with proof-of-concept for one complete flow

